<!--
 * @Description: 本文档主要是记录学习到的计算机网络知识，以及面试和笔试碰到的有关计算机网络的题目
 * @version: 2025届（秋招版）
 * @Author: ThreeStones1029 2320218115@qq.com
 * @Date: 2024-09-17 21:14:42
 * @LastEditors: ShuaiLei
 * @LastEditTime: 2024-10-01 16:35:09
-->
[TOC]

# 一、网络七层以及四层模型

对于同一台设备间的通信，一般有管道、消息队列，共享内存和信号，而对于不同的设备上的进程间的通信，就需要网络通信，为了兼容各种各样的设备，需要协商出一套通用的网络协议

## 1.1、TCP/IP网络四层模型

（1）应用层

提供用户使用的服务，当两个不同的设备需要通信时，就需要将应用数据传输到下一层，也就是传输层

应用层的协议：http，ftp，dns，smtp

应用层工作在操作系统的用户态，而其他层工作在内核态

（2）传输层



（3）网络层

（4）网络接口层

## 1.2、键入网址到网页，期间发生了什么？

（1）http

解析URL，浏览器确定服务器和文件名，生成http请求信息

（2）真实地址查询DNS

查询服务器域名对应的ip地址

DNS服务器是用于存储web域名和ip地址

域名解析过程

* 浏览器首先看自身缓存里面有没有这个域名

* 然后在操作系统缓存里面寻找

* 再到hosts文件查看

* 最后查询本地DNS服务器

（3）可靠传输TCP



（4）远程定位-IP

（5）两点传输mac

（6）出口-网卡

（7）交换机

（8）路由器

### 三次握手

三次握手是指建立TCP连接，客户端和服务器总共发送三个包

三次握手的目的：保证双方都有发送和接收的能力

（1）初始状态

客户端：closed（关闭）状态

服务端：listen（监听）状态

（2）第一次握手

（验证客户端发送能力和服务端接收能力）



（3）第二次握手

（4）第三次握手

### 四次挥手


# 二、面试笔试汇总（计算机网络）

## 2.1、http与https的对比

http与https都是网络上进行通信的两种协议，用于客户端和服务器之间的数据传输

### 2.1.1.http

http（超文本传输协议）定义：是一种应用层协议，允许客户端和服务器通过文本、图像、视频进行通信，是一种无状态协议，每次请求是独立的，服务器不会保留上一次请求的信息。

http工作流程：客户端发起请求-->服务器处理请求并相应-->显示结果

http缺点：（1）数据不加密，身份验证不足


### 2.1.2.https

https（安全超文本传输协议）定义：https是在http基础上加入了SSL或者TLS加密层，用于确保数据加密且安全的，解决了http的安全性问题

https工作流程：客户端请求https连接-->SSL/TLS握手-->加密通信-->关闭连接

https优点：数据加密、身份验证、数据完整性

### 2.1.3.http与https主要区别

|特性	|HTTP	|HTTPS|
|--------------------|--------------------|--------------------|
|安全性	|无数据加密，容易被窃听和篡改|	使用 SSL/TLS 加密，通信更加安全|
|端口号	|默认使用 80 端口|	默认使用 443 端口|
|加密	|不加密，数据以明文传输	|使用对称加密和公钥加密|
|性能	|由于没有加密过程，性能稍高	|需要加密和握手过程，性能略低|
|身份验证	|无法验证服务器身份，容易遭遇钓鱼攻击	|通过数字证书验证服务器身份|

## 2.2.http请求方法

|请求方法|获取资源|
|-------|------|
|get|请求获取资源，用于读取数据|
|post|提交数据，用于创建或者更新资源|
|put|创建或替换资源|
|delete|删除指定资源|
|head|获取资源元数据，类似get，获取响应体|
|options|请求服务器支持的http服务列表|
|patch|部分更新资源|
|trace|回显请求，常用于诊断|
|connect|建立一个隧道，用于https请求|

## 2.3.UDP协议

### 2.3.1.UDP收到损坏数据包会怎么处理？

UDP（用户数据包协议）是一种无连接的传输协议，不提供数据包的顺序保证，重传机制，差错检查

当UDP收到损坏的数据包，会直接丢弃数据包，不会进行任何处理，应用层不会收到信息

## 2.4.TCP协议

### 2.4.1.TCP基本认识

#### 2.4.1.1.TCP头格式

（1）源端口号和目标端口号

用来确定发往哪个应用

（2）序列号

建立连接时由计算机生成的随机数作为初始值，通过SYN传给接收端主机，用来解决网络包乱序问题。

（3）确认应答号

下一次期望收到的序列号，用于解决丢包问题。

（4）控制位

* SYN：该位为1，表示希望建立连接，
* ACK：该位为1，TCP 规定除了最初建立连接时的 `SYN` 包之外该位必须设置为 `1` 。
* RST：该位为1，表示TCP出现异常必须强制断开连接
* FIN：该位为1，表示今后不会有数据，希望断开连接

（5）窗口大小

TCP要做流量控制，通信双方声明窗口大小，表示当前能够处理的能力

#### 2.4.1.2.为什么需要 TCP 协议？ TCP 工作在哪一层？

IP协议是不可靠的

TCP是一个工作在传输层的可靠数据的传输服务，它确保接收端接收的网络包是无损坏、无间隔、非冗余和按序的。

#### 2.4.1.3.什么是TCP

TCP是面向连接的、可靠的、基于字节流的传输层通信协议。

* 面向连接：一对一
* 可靠的：保证报文到达接收端
* 基于字节流

#### 2.4.1.4.如何确定一个TCP连接

源地址、源端口、目的地址、目的端口

源地址和目的地址在IP头部，作用是通过IP协议发送报文给对方主机

源端口和目的端口在TCP头部，作用是告诉TCP协议将报文发往哪个进程

#### 2.4.1.5.服务端最大TCP连接并发数量

（1）文件描述符限制

（2）内存限制

#### 2.4.1.6.TCP与UDP的区别

（1）连接

TCP：面向连接

UDP：不需要建立连接

（2）服务对象

TCP：一对一的两点服务

UDP：一对一或者一对多，多对多的交互连接

（3）可靠性

TCP：可靠

UDP：不可靠

（4）拥堵控制、流量控制

TCP：有

UDP：没有

（5）首部开销

TCP：首部较长

UDP：首部固定八个字节

（6）传输

TCP：流式控制

UDP：一个一个发送

（7）分片不同

TCP：TCP大小大于MSS大小，在传输层分片

UDP：UDP大于MSD大小，在网络层分片

（8）应用场景

TCP：FTP文件传输、HTTP/HTTPS

UDP：DNS、音频视频通信、广播通信

### 2.4.2.TCP建立连接

#### 2.4.2.1.TCP建立连接过程

（1）第一个报文

客户端和服务端都处于closed状态，然后服务端开始监听，处于listen状态

客户端随机初始化一个序号（client_isn），把SYN置为1，表示SYN报文，第一个SYN报文（不包含数据）发给服务端，之后处于SYN-SENT状态

（2）第二个报文

服务端收到SYN报文后，随机初始化序号（server_isn），确认应答号填入client_isn + 1，SYN和ACK都置为1，将报文发给客户端（不可以携带数据），之后服务端处于SYN-RCVD状态

（3）第三个报文

客户端受到服务端报文后，需要向服务端发送一个应答报文，应答报文TCP首部置为1，确认应答号填入server_isn + 1，发送报文给服务端（可以携带数据），客户端处于ESTABLISHED状态，服务端收到报文后也进入ESTABLISHED状态

#### 2.4.2.2.linux查看TCP状态

~~~bash
netstat -napt
~~~

#### 2.4.2.3.为什么是三次握手？

（1）避免历史连接造成的资源浪费

（2）同步双方初始序列号

（3）避免资源浪费

两次握手：无法防止历史连接的建立，会造成双方资源的浪费，也无法可靠的同步双方序列号；

四次握手：三次握手就已经理论上最少可靠连接建立，所以不需要使用更多的通信次数。

#### 2.4.2.4.为什么每次建立 TCP 连接时，初始化的序列号都要求不一样呢？

（1）为了防止历史报文被下一个相同四元组的连接接收（主要方面）

（2）为了安全性，防止黑客伪造的相同序列号的 TCP 报文被对方接收

#### 2.4.2.5.MTU与MSS

（1）MTU：

（2）MSS：

## 2.4.网络游戏减小延迟有什么方法？

降低图像画质、对网络数据进行压缩、减小数据包大小和频率

## 2.5.对于服务器和客户端，可以连接多少客户端，客户端连接的限制是什么？

（1）端口限制

服务器通常监听固定的端口号

（2）资源限制

内存和CPU限制。每一个连接都会消耗内存和CPU

## 2.6.交换机与路由器的区别

交换机是基于以太网设计的，是二层网络设备，交换机的端口不具有mac地址

路由器是基于ip设计的，是三层网络设备，路由器各个网口都有ip地址和mac地址

## 2.7.IP协议

ICMP协议：用于告知网络包传送过程中产生的错误信息以及各种控制信息

ARP协议：用于根据IP地址查询相应以太网的mac地址



